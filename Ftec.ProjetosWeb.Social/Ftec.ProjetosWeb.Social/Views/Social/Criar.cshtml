@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Publicação - FTEC Social</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background-color: #f8fafc;
        }

        .sidebar {
            transition: all 0.3s ease;
        }

        .sidebar-item:hover {
            background-color: #e2e8f0;
        }

        .sidebar-item.active {
            background-color: #3b82f6;
            color: white;
        }

        .btn-primary {
            background-color: #3b82f6;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background-color: #2563eb;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: #e2e8f0;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background-color: #cbd5e1;
        }

        .upload-area {
            border: 2px dashed #cbd5e1;
            transition: all 0.3s ease;
        }

        .upload-area:hover {
            border-color: #3b82f6;
            background-color: #f8fafc;
        }

        .upload-area.dragover {
            border-color: #3b82f6;
            background-color: #ebf4ff;
        }

        .post-type-btn {
            transition: all 0.2s ease;
        }

        .post-type-btn.active {
            background-color: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        #preview-container-feed {
            aspect-ratio: 4/5;
        }

        #preview-container-stories {
            aspect-ratio: 9/16;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }

        @@keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="flex h-screen">
    <!-- Sidebar -->
    <div class="sidebar w-64 bg-white shadow-md hidden md:block">
        <div class="p-4 border-b border-gray-200">
            <div class="flex items-center">
                <div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold">
                    <i class="fas fa-user"></i>
                </div>
                <div class="ml-3">
                    <p class="font-semibold">Usuário Logado</p>
                    <p class="text-xs text-gray-500">@@usuario</p>
                </div>
            </div>
        </div>
        <nav class="p-2">
            <a href="/social/home" class="sidebar-item flex items-center p-3 rounded-lg mb-1">
                <i class="fas fa-home mr-3"></i>
                <span>Home</span>
            </a>
            <a href="/social/pesquisar" class="sidebar-item flex items-center p-3 rounded-lg mb-1">
                <i class="fas fa-search mr-3"></i>
                <span>Pesquisar</span>
            </a>
            <a href="/social/criar" class="sidebar-item active flex items-center p-3 rounded-lg mb-1">
                <i class="fas fa-plus-circle mr-3"></i>
                <span>Criar</span>
            </a>
            <a href="/social/perfil" class="sidebar-item flex items-center p-3 rounded-lg mb-1">
                <i class="fas fa-user mr-3"></i>
                <span>Perfil</span>
            </a>
            <a href="/social/configuracoes" class="sidebar-item flex items-center p-3 rounded-lg mb-1">
                <i class="fas fa-cog mr-3"></i>
                <span>Configurações</span>
            </a>
            <a href="/logout" class="sidebar-item flex items-center p-3 rounded-lg text-red-500 hover:bg-red-50">
                <i class="fas fa-sign-out-alt mr-3"></i>
                <span>Sair</span>
            </a>
        </nav>
    </div>

    <!-- Mobile header -->
    <div class="md:hidden fixed top-0 left-0 right-0 bg-white shadow-sm p-4 flex justify-between items-center z-10">
        <div class="flex items-center">
            <h1 class="font-bold text-blue-500">FTEC Social</h1>
        </div>
        <div class="w-8 h-8 rounded-full flex items-center justify-center text-gray-500 font-bold">
            <i class="fas fa-sign-out-alt"></i>
        </div>
    </div>

    <!-- Mobile bottom navigation -->
    <div class="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around items-center py-3 z-10">
        <a href="/social/home" class="text-2xl text-gray-500">
            <i class="fas fa-home"></i>
        </a>
        <a href="/social/pesquisar" class="text-2xl text-gray-500">
            <i class="fas fa-search"></i>
        </a>
        <a href="/social/criar" class="text-2xl text-gray-500">
            <i class="fas fa-plus-square"></i>
        </a>
        <a href="/social/perfil" class="text-2xl text-gray-500">
            <i class="fas fa-user"></i>
        </a>
        <a href="/social/configuracoes" class="text-2xl text-gray-500">
            <i class="fas fa-cog"></i>
        </a>
    </div>

    <!-- Main content -->
    <div class="flex-1 overflow-y-auto pt-16 md:pt-0">
        <div class="max-w-2xl mx-auto p-4">
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h1 class="text-2xl font-bold text-gray-800 mb-6">Criar Nova Publicação</h1>
                
                <!-- Post type selection -->
                <div class="mb-8">
                    <p class="text-sm font-medium text-gray-700 mb-3">Tipo de publicação</p>
                    <div class="flex gap-4">
                        <button id="feed-btn" class="post-type-btn active flex-1 py-3 rounded-lg border border-gray-300 font-medium">
                            <i class="fas fa-square-poll-vertical mr-2"></i> Feed
                        </button>
                        <button id="stories-btn" class="post-type-btn flex-1 py-3 rounded-lg border border-gray-300 font-medium">
                            <i class="fas fa-circle-play mr-2"></i> Stories
                        </button>
                    </div>
                </div>

                <!-- Feed content -->
                <div id="feed-content" class="space-y-6 fade-in">
                    <!-- Upload area -->
                    <div>
                        <div id="upload-area-feed" class="upload-area rounded-lg p-8 text-center cursor-pointer mb-4">
                            <div id="upload-content-feed" class="flex flex-col items-center justify-center h-full">
                                <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-3"></i>
                                <p class="font-medium text-gray-700">Arraste e solte sua foto ou vídeo aqui</p>
                                <p class="text-sm text-gray-500 mt-2">ou clique para selecionar</p>
                                <input type="file" id="file-input-feed" class="hidden" accept="image/*, video/*">
                            </div>
                            <div id="preview-container-feed" class="hidden relative w-full">
                                <img id="preview-image-feed" src="#" alt="Preview" class="w-full h-full object-cover rounded-lg">
                                <button id="remove-media-feed" class="absolute top-2 right-2 bg-white rounded-full p-2 shadow-md text-gray-700 hover:text-red-500">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="bg-blue-50 p-3 rounded-lg text-sm text-blue-700">
                            <i class="fas fa-info-circle mr-2"></i>
                            Para melhor qualidade, utilize imagens na dimensão 1080x1350 ou proporção 4:5
                        </div>
                    </div>

                    <!-- Caption and options -->
                    <div>
                        <div class="flex items-center mb-6">
                            <div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold mr-3">
                                <i class="fas fa-user"></i>
                            </div>
                            <span class="font-medium">@@usuario</span>
                        </div>

                        <div class="mb-6">
                            <label for="caption" class="block text-sm font-medium text-gray-700 mb-2">Legenda</label>
                            <textarea id="caption" rows="5" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Escreva uma legenda..."></textarea>
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Opções</label>
                            <div class="space-y-3">
                                <div class="flex items-center">
                                    <input type="checkbox" id="allow-comments" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" checked>
                                    <label for="allow-comments" class="ml-2 block text-sm text-gray-700">Permitir comentários</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" id="hide-likes" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                    <label for="hide-likes" class="ml-2 block text-sm text-gray-700">Ocultar contagem de curtidas</label>
                                </div>
                            </div>
                        </div>

                        <button id="publish-feed-btn" class="btn-primary w-full py-3 rounded-lg text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-paper-plane mr-2"></i> Publicar no Feed
                        </button>
                    </div>
                </div>

                <!-- Stories content -->
                <div id="stories-content" class="space-y-6 hidden fade-in">
                    <!-- Upload area -->
                    <div>
                        <div id="upload-area-stories" class="upload-area rounded-lg p-8 text-center cursor-pointer mb-4">
                            <div id="upload-content-stories" class="flex flex-col items-center justify-center h-full">
                                <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-3"></i>
                                <p class="font-medium text-gray-700">Arraste e solte sua foto ou vídeo aqui</p>
                                <p class="text-sm text-gray-500 mt-2">ou clique para selecionar</p>
                                <input type="file" id="file-input-stories" class="hidden" accept="image/*, video/*">
                            </div>
                            <div id="preview-container-stories" class="hidden relative w-full">
                                <img id="preview-image-stories" src="#" alt="Preview" class="w-full h-full object-cover rounded-lg">
                                <button id="remove-media-stories" class="absolute top-2 right-2 bg-white rounded-full p-2 shadow-md text-gray-700 hover:text-red-500">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="bg-blue-50 p-3 rounded-lg text-sm text-blue-700">
                            <i class="fas fa-info-circle mr-2"></i>
                            Para melhor qualidade, utilize imagens na dimensão 1080x1920 ou proporção 9:16
                        </div>
                    </div>

                    <button id="publish-stories-btn" class="btn-primary w-full py-3 rounded-lg text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        <i class="fas fa-paper-plane mr-2"></i> Publicar nos Stories
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Menu toggle for mobile
        const menuToggle = document.getElementById('menu-toggle');
        const mobileSidebar = document.getElementById('mobile-sidebar');
        const closeMenu = document.getElementById('close-menu');

        menuToggle.addEventListener('click', () => {
            mobileSidebar.classList.remove('hidden');
        });

        closeMenu.addEventListener('click', () => {
            mobileSidebar.classList.add('hidden');
        });

        // Post type selection
        const feedBtn = document.getElementById('feed-btn');
        const storiesBtn = document.getElementById('stories-btn');
        const feedContent = document.getElementById('feed-content');
        const storiesContent = document.getElementById('stories-content');

        feedBtn.addEventListener('click', () => {
            feedBtn.classList.add('active');
            storiesBtn.classList.remove('active');
            feedContent.classList.remove('hidden');
            storiesContent.classList.add('hidden');
        });

        storiesBtn.addEventListener('click', () => {
            storiesBtn.classList.add('active');
            feedBtn.classList.remove('active');
            storiesContent.classList.remove('hidden');
            feedContent.classList.add('hidden');
        });

        // File upload functionality for feed
        const setupUpload = (type) => {
            const uploadArea = document.getElementById(`upload-area-${type}`);
            const uploadContent = document.getElementById(`upload-content-${type}`);
            const previewContainer = document.getElementById(`preview-container-${type}`);
            const previewImage = document.getElementById(`preview-image-${type}`);
            const fileInput = document.getElementById(`file-input-${type}`);
            const removeMedia = document.getElementById(`remove-media-${type}`);
            const publishBtn = document.getElementById(`publish-${type}-btn`);

            // Click on upload area
            uploadArea.addEventListener('click', () => {
                fileInput.click();
            });

            // File input change
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length) {
                    const file = e.target.files[0];
                    showPreview(file, type);
                }
            });

            // Drag and drop
            ['dragenter', 'dragover'].forEach(eventName => {
                uploadArea.addEventListener(eventName, (e) => {
                    e.preventDefault();
                    uploadArea.classList.add('dragover');
                });
            });

            ['dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                });
            });

            uploadArea.addEventListener('drop', (e) => {
                const file = e.dataTransfer.files[0];
                if (file) {
                    showPreview(file, type);
                }
            });

            // Remove media
            removeMedia.addEventListener('click', (e) => {
                e.stopPropagation();
                resetUploadArea(type);
            });

            // Show preview
            function showPreview(file, type) {
                if (file.type.match('image.*')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        previewImage.src = e.target.result;
                        uploadContent.classList.add('hidden');
                        previewContainer.classList.remove('hidden');
                        publishBtn.disabled = false;
                    }
                    reader.readAsDataURL(file);
                } else if (file.type.match('video.*')) {
                    // For video preview, we would need more complex handling
                    // For simplicity, we'll just show a message
                    previewImage.src = '';
                    previewImage.alt = 'Video file selected';
                    uploadContent.classList.add('hidden');
                    previewContainer.classList.remove('hidden');
                    publishBtn.disabled = false;
                }
            }

            // Reset upload area
            function resetUploadArea(type) {
                fileInput.value = '';
                previewImage.src = '#';
                uploadContent.classList.remove('hidden');
                previewContainer.classList.add('hidden');
                publishBtn.disabled = true;
            }
        }

        // Initialize both uploaders
        setupUpload('feed');
        setupUpload('stories');

        // Character count for caption
        const caption = document.getElementById('caption');
        const charCount = document.getElementById('char-count');
        caption.addEventListener('input', () => {
            const count = caption.value.length;
            charCount.textContent = `${count}/2.200 caracteres`;
        });

        // Publish buttons
        document.getElementById('publish-feed-btn').addEventListener('click', () => {
            alert('Publicação no Feed enviada com sucesso!');
        });

        document.getElementById('publish-stories-btn').addEventListener('click', () => {
            alert('Stories publicado com sucesso!');
        });
    </script>
</body>
</html>